<!DOCTYPE html>

<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Gamified Quest Dashboard</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#13ec5b",
                        "background-light": "#f6f8f6",
                        "background-dark": "#102216",
                    },
                    fontFamily: {
                        "display": ["Inter"]
                    },
                    borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
                },
            },
        }
    </script>
<style>
        .quest-path {
            background-image: radial-gradient(circle, #326744 1.5px, transparent 1.5px);
            background-size: 24px 24px;
        }
        .ios-blur {
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }
    </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
  </head>
<body class="bg-background-light dark:bg-background-dark font-display text-white selection:bg-primary/30">
<div class="relative flex h-full min-h-screen w-full flex-col overflow-x-hidden pb-24">
<!-- Profile Header Section -->
<header class="sticky top-0 z-30 bg-background-dark/80 ios-blur border-b border-primary/10">
<div class="flex p-4 items-center justify-between">
<div class="flex gap-4 items-center">
<div class="relative">
<div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-16 w-16 border-2 border-primary shadow-[0_0_15px_rgba(19,236,91,0.3)]" data-alt="Paladin character avatar with glowing green accents" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuA6RWm0SAnvCcOH6i8d2cm1qmJv_urtOPGY06Dg6xZCOTOpQf-g-AP93HXBsaRFjlQrQlxiTEMPZijJSisQamInv92hFjg09KKH-l_5bfjfflHLWWGqjiMg1eN0tuI08Hb7XerJkBBKmRD0cLq9UWGUZMh40cbL9WberGNO6iUWiORK3B7Hyx1TQXB2H0kWNdxPK-vnSZnZyH-2zNjCDV48gjFAJqimStuvH0h1pQGhhLCkhBCi-ds634VldyiEw1P5bninB-2PJmI");'>
</div>
<div class="absolute -bottom-1 -right-1 bg-primary text-background-dark text-[10px] font-bold px-1.5 py-0.5 rounded-full border-2 border-background-dark">
                            LV 14
                        </div>
</div>
<div class="flex flex-col justify-center">
<p class="text-white text-lg font-bold leading-tight tracking-tight">Arthur Lightbringer</p>
<div class="flex items-center gap-2 mt-1">
<span class="material-symbols-outlined text-yellow-500 text-sm">monetization_on</span>
<p class="text-[#92c9a4] text-xs font-medium">1,250 Gold</p>
<span class="text-primary/40 ml-1">•</span>
<span class="material-symbols-outlined text-primary text-sm ml-1">bolt</span>
<p class="text-[#92c9a4] text-xs font-medium">95% Mana</p>
</div>
</div>
</div>
<div class="flex flex-col items-end">
<div class="flex items-center gap-1 bg-primary/10 px-3 py-1.5 rounded-full border border-primary/20">
<span class="material-symbols-outlined text-orange-500 text-lg">local_fire_department</span>
<span class="text-white text-sm font-bold">12 DAY STREAK</span>
</div>
</div>
</div>
<!-- XP Progress Bar -->
<div class="px-4 pb-4">
<div class="flex flex-col gap-2">
<div class="flex justify-between items-end">
<p class="text-[#92c9a4] text-[10px] uppercase tracking-widest font-bold">XP to Level 15</p>
<p class="text-primary text-xs font-bold">2,450 / 3,000</p>
</div>
<div class="rounded-full bg-[#326744]/30 h-2.5 overflow-hidden border border-white/5">
<div class="h-full rounded-full bg-gradient-to-r from-primary to-emerald-400 shadow-[0_0_10px_rgba(19,236,91,0.5)]" style="width: 81%;"></div>
</div>
</div>
</div>
</header>
<!-- Stats Section (Quick View) -->
<div class="flex gap-3 p-4 overflow-x-auto no-scrollbar">
<div class="flex min-w-[140px] flex-col gap-1 rounded-xl p-4 bg-[#23482f]/40 border border-primary/10">
<p class="text-[#92c9a4] text-[10px] font-bold uppercase tracking-wider">Productivity</p>
<p class="text-white text-xl font-bold">88%</p>
<p class="text-primary text-[10px] font-medium">+2.4% today</p>
</div>
<div class="flex min-w-[140px] flex-col gap-1 rounded-xl p-4 bg-[#23482f]/40 border border-primary/10">
<p class="text-[#92c9a4] text-[10px] font-bold uppercase tracking-wider">Quests Slayed</p>
<p class="text-white text-xl font-bold">04/07</p>
<div class="flex gap-1 mt-1">
<div class="h-1 w-4 bg-primary rounded-full"></div>
<div class="h-1 w-4 bg-primary rounded-full"></div>
<div class="h-1 w-4 bg-primary rounded-full"></div>
<div class="h-1 w-4 bg-primary rounded-full"></div>
<div class="h-1 w-4 bg-white/10 rounded-full"></div>
</div>
</div>
</div>
<div class="px-4 py-2">
<h2 class="text-white text-xl font-bold tracking-tight">Today's Quest Map</h2>
<p class="text-[#92c9a4] text-xs">Tuesday, Oct 24th • Realm of Productivity</p>
</div>
<!-- Quest Map (Timeline) -->
<main class="relative flex-1 px-4 mt-4">
<!-- Central Path Line -->
<div class="absolute left-9 top-0 bottom-0 w-[2px] bg-gradient-to-b from-primary via-primary/50 to-white/10"></div>
<div id="quest-container" class="flex flex-col gap-8 relative">
    <!-- Quests will be injected here -->
</div>
</main>

<script>
    async function loadSchedule() {
        try {
            const response = await fetch('schedule.json');
            const events = await response.json();
            renderQuests(events);
        } catch (error) {
            console.error('Error loading schedule:', error);
        }
    }

    function renderQuests(events) {
        const container = document.getElementById('quest-container');
        container.innerHTML = ''; // Clear loading state

        const now = new Date(); // Use current time
        // For demo purposes, you might want to fix 'now' if your calendar data is in the future
        // const now = new Date("2026-04-01T12:00:00Z");

        // Sort events by date
        events.sort((a, b) => new Date(a.dtstart) - new Date(b.dtstart));

        // Filter for "today" (or just show next 5-10 events for demo)
        // Let's show upcoming 20 events for better visibility
        const upcomingEvents = events.filter(e => new Date(e.dtstart) > new Date(now.getTime() - 24 * 60 * 60 * 1000)).slice(0, 20);

        upcomingEvents.forEach(event => {
            const start = new Date(event.dtstart);
            const end = new Date(event.dtend);
            let status = 'upcoming'; // upcoming, active, completed

            if (end < now) {
                status = 'completed';
            } else if (start <= now && end >= now) {
                status = 'active';
            } else {
                status = 'upcoming';
            }

            const timeString = start.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

            let tasksHtml = '';
            if (event.tasks && event.tasks.length > 0) {
                tasksHtml = '<div class="mt-2 flex flex-col gap-1">';
                event.tasks.forEach(task => {
                    const icon = task.completed ? 'check_box' : 'check_box_outline_blank';
                    const color = task.completed ? 'text-primary' : 'text-white/40';
                    const decoration = task.completed ? 'line-through text-white/50' : 'text-white/80';
                    tasksHtml += `
                        <div class="flex items-center gap-2">
                            <span class="material-symbols-outlined ${color} text-sm">${icon}</span>
                            <span class="text-xs ${decoration}">${task.text}</span>
                        </div>
                    `;
                });
                tasksHtml += '</div>';
            }

            let html = '';

            if (status === 'completed') {
                html = `
                <div class="flex gap-6 items-start opacity-70">
                    <div class="z-10 flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-yellow-500 shadow-[0_0_15px_rgba(234,179,8,0.4)] border-4 border-background-dark">
                        <span class="material-symbols-outlined text-background-dark font-bold">check</span>
                    </div>
                    <div class="flex-1 rounded-xl bg-white/5 border border-white/10 p-4 transition-all hover:bg-white/10">
                        <div class="flex justify-between items-start mb-1">
                            <p class="text-white text-sm font-bold line-through text-white/50">${event.summary}</p>
                            <span class="text-[10px] font-bold text-yellow-500">+XP</span>
                        </div>
                        <p class="text-[#92c9a4] text-xs">Completed • ${timeString}</p>
                        ${tasksHtml}
                    </div>
                </div>`;
            } else if (status === 'active') {
                html = `
                <div class="flex gap-6 items-start">
                    <div class="z-10 flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-primary animate-pulse shadow-[0_0_20px_rgba(19,236,91,0.6)] border-4 border-background-dark">
                        <span class="material-symbols-outlined text-background-dark font-bold">swords</span>
                    </div>
                    <div class="flex-1 rounded-xl bg-primary/10 border-2 border-primary p-4 shadow-[inset_0_0_20px_rgba(19,236,91,0.1)]">
                        <div class="flex justify-between items-start mb-1">
                            <p class="text-white text-sm font-bold uppercase tracking-tight italic">${event.summary}</p>
                            <div class="flex items-center gap-1 bg-primary px-1.5 py-0.5 rounded text-[10px] font-black text-background-dark">ACTIVE</div>
                        </div>
                        <p class="text-primary text-xs font-medium">${event.location || 'Quest'} • ${timeString}</p>
                        ${tasksHtml}
                        <div class="mt-3 flex gap-2">
                            <button class="bg-primary text-background-dark text-[10px] font-bold px-3 py-1.5 rounded uppercase">Finish Quest</button>
                        </div>
                    </div>
                </div>`;
            } else { // Upcoming
                html = `
                <div class="flex gap-6 items-start opacity-60">
                    <div class="z-10 flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-[#23482f] border-4 border-background-dark">
                        <span class="material-symbols-outlined text-white/40 font-bold">lock</span>
                    </div>
                    <div class="flex-1 rounded-xl bg-white/5 border border-white/5 p-4">
                        <div class="flex justify-between items-start mb-1">
                            <p class="text-white/70 text-sm font-medium">${event.summary}</p>
                        </div>
                        <p class="text-[#92c9a4]/60 text-xs">${event.location || 'Future Quest'} • ${timeString}</p>
                        ${tasksHtml}
                    </div>
                </div>`;
            }

            container.insertAdjacentHTML('beforeend', html);
        });
    }

    loadSchedule();
</script>
<!-- Floating Action Button -->
<button class="fixed right-6 bottom-24 z-40 flex h-14 w-14 items-center justify-center rounded-full bg-primary text-background-dark shadow-[0_10px_25px_rgba(19,236,91,0.4)] hover:scale-105 active:scale-95 transition-transform">
<span class="material-symbols-outlined font-bold text-3xl">add</span>
</button>
<!-- Bottom Navigation Bar (iOS Style) -->
<nav class="fixed bottom-0 left-0 right-0 z-50 h-20 bg-background-dark/95 border-t border-white/10 ios-blur flex items-center justify-around px-4 pb-2">
<div class="flex flex-col items-center gap-1 text-primary">
<span class="material-symbols-outlined text-[28px] fill-[1]">map</span>
<span class="text-[10px] font-bold uppercase tracking-tighter">Map</span>
</div>
<div class="flex flex-col items-center gap-1 text-white/40">
<span class="material-symbols-outlined text-[28px]">inventory_2</span>
<span class="text-[10px] font-bold uppercase tracking-tighter">Inventory</span>
</div>
<div class="flex flex-col items-center gap-1 text-white/40">
<span class="material-symbols-outlined text-[28px]">leaderboard</span>
<span class="text-[10px] font-bold uppercase tracking-tighter">Arena</span>
</div>
<div class="flex flex-col items-center gap-1 text-white/40">
<span class="material-symbols-outlined text-[28px]">person</span>
<span class="text-[10px] font-bold uppercase tracking-tighter">Hero</span>
</div>
<div class="flex flex-col items-center gap-1 text-white/40">
<span class="material-symbols-outlined text-[28px]">settings</span>
<span class="text-[10px] font-bold uppercase tracking-tighter">Specs</span>
</div>
</nav>
</div>
</body></html>